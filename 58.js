(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[58],{Pv4R:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return L})),n.d(t,"b",(function(){return x}));var a=document.head||document.getElementsByTagName("head")[0],o={};function r(e){return new Promise((function(t,n){if(e in o)t();else{var r=document.createElement("script");r.type="text/javascript",r.id="_react_baidu_map",r.src=e,r.onerror=function(t){a.removeChild(r),n(new URIError("The Script ".concat(e," is no accessible.")))},r.onload=function(){o[e]=!0,t()},a.appendChild(r)}}))}var i=n("U8pU"),c=n("o0o1"),u=n.n(c),l=n("HaE+"),s=n("1OyB"),f=n("vuIU"),p=n("Ji7U"),d=n("LK+K"),b=n("cDcd"),v=n.n(b);function h(e){return new Promise((function(t,n){window.setTimeout(t,e)}))}var M=3,O=function(e){Object(p["a"])(n,e);var t=Object(d["a"])(n);function n(e){var a;if(Object(s["a"])(this,n),a=t.call(this,e),a.state={loaded:!!window.BMap},a.handleError=function(e){a.setState({error:e})},a.finish=function(){a.setState({loaded:!0})},null==a.props.akay)throw new TypeError("BaiDuMap: akay is required");return a}return Object(f["a"])(n,null,[{key:"ready",value:function(){var e=Object(l["a"])(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.BMap){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e,t){n.waitQueue.push([e,t])})));case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),Object(f["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.callbackName;if(null==window.BMap){if(window[e])return void n.waitQueue.push([this.finish,this.handleError]);this.loadMap()}}},{key:"render",value:function(){return this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?v.a.createElement("div",{style:{color:"red"}},this.state.error.message):null}},{key:"getScriptSrc",value:function(){var e=this.props,t=e.protocol||window.location.protocol;return-1===t.indexOf(":")&&(t+=":"),"".concat(t,"//").concat(e.hostAndPath,"?v=").concat(e.version,"&ak=").concat(e.akay,"&callback=").concat(e.callbackName)}},{key:"loadMap",value:function(){var e=Object(l["a"])(u.a.mark((function e(){var t,a,o,c,l=this;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.props.callbackName,a=this.getScriptSrc(),window[t]=function(){var e=n.waitQueue;n.waitQueue=[],e.forEach((function(e){return e[0]()})),l.finish()},o=0;case 4:if(!(o<M)){e.next=22;break}return e.prev=5,e.next=8,r(a);case 8:return e.abrupt("break",22);case 11:if(e.prev=11,e.t0=e["catch"](5),o!==M-1){e.next=17;break}if(c=function(){var t=new Error("Failed to load Baidu Map: ".concat(e.t0.message)),a=n.waitQueue;return n.waitQueue=[],a.forEach((function(e){return e[1](t)})),l.handleError(t),{v:void 0}}(),"object"!==Object(i["a"])(c)){e.next=17;break}return e.abrupt("return",c.v);case 17:return e.next=19,h(1e3*o);case 19:o++,e.next=4;break;case 22:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(){return e.apply(this,arguments)}return t}()}]),n}(v.a.Component);O.defaultProps={akay:"",hostAndPath:"api.map.baidu.com/api",version:"3.0",callbackName:"load_bmap_sdk"},O.waitQueue=[];var w=n("VTBJ"),m=n("Ff2n"),g=n("ODXe");function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.forEach((function(n){var a="enable".concat(n),o=Object(b["useState"])(t[a]),r=Object(g["a"])(o,2),i=r[0],c=r[1];Object(b["useEffect"])((function(){var o=t[a]?"enable".concat(n):"disable".concat(n);e&&void 0!==t[a]&&(e[o]&&e[o](),t[a]!==i&&c(t[a]))}),[e,t[a]])}))}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.visiable,a=Object(b["useState"])(n),o=Object(g["a"])(a,2),r=o[0],i=o[1];Object(b["useEffect"])((function(){e&&void 0!==n&&(n?e.show&&e.show():e.hide&&e.hide(),n!==r&&i(n))}),[e,n])}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.forEach((function(n){var a="".concat(n.charAt(0).toLowerCase()).concat(n.slice(1)),o=Object(b["useState"])(t[a]),r=Object(g["a"])(o,2),i=r[0],c=r[1];Object(b["useEffect"])((function(){if(e&&e["set".concat(n)]&&void 0!==t[a]){var o=t[a];if(o&&o.lng&&o.lat){o=new BMap.Point(o.lng,o.lat);var r=i;if(r&&r.lng&&r.lat&&(r=new BMap.Point(r.lng,r.lat),o.equals(r)))return}e["set".concat(n)](o),i!==t[a]&&("bounds"===a?i&&t[a]&&!i.equals(t[a])&&c(t[a]):c(t[a]))}}),[e,t[a]])}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;n.forEach((function(n){var o="on".concat(n),r=t[o];Object(b["useEffect"])((function(){if(e&&r&&n){var t=n;return t="CamelCase"===a?n.replace(n[0],n[0].toLowerCase()):n.toLowerCase(),e.addEventListener(t,r),function(){e.removeEventListener(t,r)}}}),[e,t[o]])}))}function y(e){var t=Object(b["useRef"])();return Object(b["useEffect"])((function(){t.current=e})),t.current}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widget,n=e.minZoom,a=e.maxZoom,o=e.mapType,r=e.enableHighResolution,c=e.enableAutoResize,u=e.enableMapClick,l=Object(b["useState"])(),s=Object(g["a"])(l,2),f=s[0],p=s[1],d=Object(b["useState"])(e.zoom||15),v=Object(g["a"])(d,2),h=v[0],M=v[1],O=Object(b["useState"])(e.container),w=Object(g["a"])(O,2),m=w[0],B=w[1];Object(b["useMemo"])((function(){if(m&&!f&&BMap){var e=new BMap.Map(m,{minZoom:n,maxZoom:a,mapType:o,enableHighResolution:r,enableAutoResize:c,enableMapClick:u});t&&t.forEach((function(t){if("string"===typeof t)e.addControl(new BMap[t]);else if("object"===Object(i["a"])(t)&&t.control&&"function"===typeof t.control)e.addControl(t.control(BMap,e));else if("object"===Object(i["a"])(t)&&t.name){var n="function"===typeof t.options?t.options(BMap,e):t.options;e.addControl(new BMap[t.name](n))}})),p(e)}}),[m,f]);var y=Object(b["useState"])(e.center||"\u4e0a\u6d77"),k=Object(g["a"])(y,2),E=k[0],z=k[1];Object(b["useEffect"])((function(){if(f&&E){var e=E;E&&E.lng&&E.lat&&(e=new BMap.Point(E.lng,E.lat)),f.centerAndZoom(e,h)}}),[E,f]);var I=Object(b["useState"])(e.autoLocalCity),D=Object(g["a"])(I,2),R=D[0],T=D[1];return Object(b["useEffect"])((function(){if(f&&R){var e=new BMap.LocalCity;e.get((function(e){z(e.name),M(e.level),T(!1)}))}}),[R,f]),S(f,e,["Click","DblClick","RightClick","RightdblClick","MapTypeChange","MouseMove","MouseOver","MouseOut","MoveStart","Moving","MoveEnd","ZoomStart","ZoomEnd","AddOverlay","AddControl","RemoveControl","RemoveOverlay","ClearOverlays","DragStart","Dragging","DragEnd","AddTileLayer","RemoveTileLayer","Load","ReSize","HotspotClick","HotspotOver","HotspotOut","TilesLoaded","TouchStart","TouchMove","TouchEnd","LongPress"]),C(f,e,["DefaultCursor","DraggingCursor","MinZoom","MaxZoom","MapStyle","MapStyleV2","Panorama","CurrentCity","MapType","Viewport","Zoom"]),j(f,e,["Dragging","ScrollWheelZoom","DoubleClickZoom","Keyboard","InertialDragging","ContinuousZoom","PinchToZoom","AutoResize"]),{map:f,setMap:p,container:m,setContainer:B,center:E,setCenter:z,autoLocalCity:R,setAutoLocalCity:T}},E=v.a.forwardRef((function(e,t){var n=e.className,a=e.style,o=e.children,r=Object(m["a"])(e,["className","style","children"]),i=Object(b["useRef"])(null),c=k(Object(w["a"])({container:i.current},r)),u=c.setContainer,l=c.container,s=c.setCenter,f=c.setAutoLocalCity,p=c.map;Object(b["useEffect"])((function(){return u(i.current)}),[i.current]),Object(b["useEffect"])((function(){r.center&&s(r.center)}),[r.center]),Object(b["useEffect"])((function(){return f(r.autoLocalCity)}),[r.autoLocalCity]),Object(b["useImperativeHandle"])(t,(function(){return Object(w["a"])(Object(w["a"])({},r),{},{map:p,BMap:BMap,container:i})}),[p]);var d=v.a.Children.toArray(o);return v.a.createElement(b["Fragment"],null,v.a.createElement("div",{ref:i,className:n,style:Object(w["a"])({fontSize:1,height:"100%"},a)}),BMap&&p&&"function"===typeof o&&o({BMap:BMap,map:p,container:l}),BMap&&p&&d.map((function(e){if(v.a.isValidElement(e))return v.a.cloneElement(e,Object(w["a"])(Object(w["a"])({},e.props),{},{BMap:BMap,map:p,container:l}))})))})),z=n("faye"),I=n.n(z);var D=n("i4Zk"),R=n.n(D),T=function(e){for(var t={simple_red:new BMap.Icon(R.a,new BMap.Size(21,33),{imageOffset:new BMap.Size(-227,-189),anchor:new BMap.Size(10.5,33)}),simple_blue:new BMap.Icon(R.a,new BMap.Size(21,33),{imageOffset:new BMap.Size(-227,-225),anchor:new BMap.Size(10.5,33)}),loc_red:new BMap.Icon(R.a,new BMap.Size(23,35),{imageOffset:new BMap.Size(-200,-189),anchor:new BMap.Size(11.5,35)}),loc_blue:new BMap.Icon(R.a,new BMap.Size(23,35),{imageOffset:new BMap.Size(-200,-225),anchor:new BMap.Size(11.5,35)}),dot_red:new BMap.Icon(R.a,new BMap.Size(8,8),{imageOffset:new BMap.Size(-108,-233),anchor:new BMap.Size(4,8)}),dot_blue:new BMap.Icon(R.a,new BMap.Size(8,8),{imageOffset:new BMap.Size(-108,-243),anchor:new BMap.Size(4,8)}),start:new BMap.Icon(R.a,new BMap.Size(25,40),{imageOffset:new BMap.Size(-200,-139),anchor:new BMap.Size(12.5,40)}),end:new BMap.Icon(R.a,new BMap.Size(25,40),{imageOffset:new BMap.Size(-225,-139),anchor:new BMap.Size(12.5,40)}),location:new BMap.Icon(R.a,new BMap.Size(14,20),{imageOffset:new BMap.Size(-124,-233),anchor:new BMap.Size(7,20)})},n=1;n<=10;n++)t["red"+n]=new BMap.Icon(R.a,new BMap.Size(21,33),{imageOffset:new BMap.Size(0-21*(n-1),0),anchor:new BMap.Size(10.5,33)});for(n=1;n<=10;n++)t["blue"+n]=new BMap.Icon(R.a,new BMap.Size(21,33),{imageOffset:new BMap.Size(0-21*(n-1),-66),anchor:new BMap.Size(10.5,33)});return t[e]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=e.position,a=e.animation,o=e.offset,r=e.icon,i=e.enableMassClear,c=e.enableDragging,u=e.enableClicking,l=e.raiseOnDrag,s=e.draggingCursor,f=e.rotation,p=e.shadow,d=e.title,v=Object(b["useState"])(),h=Object(g["a"])(v,2),M=h[0],O=h[1],w={offset:o,icon:r,enableMassClear:i,enableDragging:c,enableClicking:u,raiseOnDrag:l,draggingCursor:s,rotation:f,shadow:p,title:d};Object(b["useMemo"])((function(){if(BMap&&t&&!M){var e=new BMap.Point(n.lng,n.lat),o=new BMap.Marker(e,w);t.addOverlay(o),o.setAnimation(a),O(o)}}),[t,M]);var m=Object(b["useState"])(e.type||"loc_blue"),y=Object(g["a"])(m,2),k=y[0],E=y[1];return Object(b["useEffect"])((function(){if(t&&M&&!r&&k){var e=T(k);e.setImageSize(new BMap.Size(300,300)),M.setIcon(e)}}),[k,M]),B(M,e),S(M,e,["Click","DblClick","MouseDown","MouseUp","MouseOut","MouseOver","Remove","InfowindowClose","InfowindowOpen","DragStart","Dragging","DragEnd","RightClick"]),j(M,e,["Dragging","MassClear","Clicking"]),C(M,e,["Icon","Position","Animation","Offset","Label","Title","Top","ZIndex","Rotation","Shadow"]),{marker:M,setMarker:O,type:k,setType:E}},L=v.a.forwardRef((function(e,t){var n=P(e),a=n.marker,o=n.setType;return Object(b["useEffect"])((function(){return e.type&&o(e.type)}),[e.type]),Object(b["useImperativeHandle"])(t,(function(){return Object(w["a"])(Object(w["a"])({},e),{},{marker:a})})),null})),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(b["useState"])(),n=Object(g["a"])(t,2),a=n[0],o=n[1],r=e.map,i=e.offset,c=e.style,u=e.content,l=e.position,s=e.enableMassClear;return Object(b["useMemo"])((function(){if(BMap&&r&&!a){var e={offset:i,position:l,enableMassClear:s},t=new BMap.Label(u||"",e);t.setStyle(Object(w["a"])({},c)),r.addOverlay(t),o(t)}}),[r]),B(a,e),S(a,e,["Click","DblClick","MouseDo","MouseUp","MouseOout","MouseO","Remove","RightClick"]),C(a,e,["Style","Content","Position","Offset","Title","ZIndex"]),j(a,e,["MassClear"]),{label:a,setLabel:o}},x=v.a.forwardRef((function(e,t){var n=A(e),a=n.label;return Object(b["useImperativeHandle"])(t,(function(){return Object(w["a"])(Object(w["a"])({},e),{},{label:a})}),[a]),null}));n("wx14");var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(b["useState"])(document.createElement("div")),n=Object(g["a"])(t,2),a=n[0],o=n[1],r=Object(b["useState"])(),i=Object(g["a"])(r,2),c=i[0],u=i[1],l=Object(b["useState"])(0),s=Object(g["a"])(l,2),f=s[0],p=s[1],d=Object(b["useState"])(e.children),v=Object(g["a"])(d,2),h=v[0],M=v[1];Object(b["useMemo"])((function(){if(!c){var e=I.a.createPortal(h,a);p(f+1),u(e)}}),[c]);var O=y(f);return Object(b["useMemo"])((function(){if(a&&h&&f===O&&f>0){var e=I.a.createPortal(h,a);p(f+1),u(e)}}),[h,a,c]),{div:a,setDiv:o,portal:c,setPortal:u,children:h,setChildren:M}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Z({children:e.children}),n=t.portal,a=t.setPortal,o=Object(b["useState"])(),r=Object(g["a"])(o,2),i=r[0],c=r[1],u=e.map,l=e.anchor,s=e.offset;return Object(b["useMemo"])((function(){if(u&&!i){var e=new BMap.CopyrightControl({anchor:l||BMAP_ANCHOR_TOP_RIGHT,offset:s});u.addControl(e),c(e)}}),[u,i]),B(i,e),C(i,e,["Anchor","Offset"]),{portal:n,setPortal:a,copyrightControl:i,setCopyrightControl:c}},H=1,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.children,n=e.control,a=e.bounds,o=Z(),r=o.portal,i=o.div,c=o.setChildren,u=Object(b["useState"])(H++),l=Object(g["a"])(u,1),s=l[0];Object(b["useEffect"])((function(){n&&c(t)}),[t,n]);var f=y(s);return Object(b["useEffect"])((function(){return r&&n&&n.addCopyright({id:s,bounds:a,content:i.innerHTML}),function(){f&&n&&n.removeCopyright(f)}}),[t,r]),r||null},Q=v.a.forwardRef((function(e,t){var n=_(e),a=n.copyrightControl;return Object(b["useImperativeHandle"])(t,(function(){return Object(w["a"])(Object(w["a"])({},e),{},{copyrightControl:a})}),[a]),v.a.createElement(b["Fragment"],null,v.a.Children.toArray(e.children).map((function(e,t){return v.a.isValidElement(e)?v.a.cloneElement(e,{control:a,id:t+1}):e})))}));Q.Item=N},i4Zk:function(e,t,n){e.exports=n.p+"static/markers.2260d1c0.png"}}]);